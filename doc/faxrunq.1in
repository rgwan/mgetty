.TH faxrunq 1 "27 Oct 93" "greenie" "mgetty+sendfax manual"
.IX faxrunq
.SH NAME
faxrunq \- send fax jobs queued by faxspool(1)
.SH SYNOPSIS
.B faxrunq
.SH DESCRIPTION
Run the fax queue set up by faxspool(1), try to send all faxes, record
result, remove job and send notify mails.

.I faxrunq 
looks for all the jobs queued by faxspool(1) to
@FAX_SPOOL_OUT@/*. For each job in the queue, faxrunq tries to
send it, using sendfax(8).

If the send succeeds, the job is removed from the queue, and a "success"
mail is sent to the originator of the spooled job.

If the send fails, it's logged, and faxrunq proceeds to the next job. If
the job fails five times "fatally", that is, not with a locked or engaged
line, but with "NO CARRIER" (no fax machine, or line noise), the job is
suspended, and the requestor gets a mail, telling him so.

.SH CONFIGURATION FILE

Some aspects of the behaviour of 
.I faxrunq
can be controlled by a configuration file, @CONFDIR@/faxrunq.config.  In
this file, you can use the following options:
.TP
.B success-send-mail [y/n]
A boolean parameter that controls whether a mail will be sent after
successful completition of the fax job.

.TP
.B failure-send-mail [y/n]
A boolean parameter that controls whether a mail will be sent after
the fax job has failed more than the maximum number of times.

.TP
.B success-call-program <name>
Here, you can specify a program that will be run when the fax has been
successfully sent. It will be passed one command line parameter, and
that's the full path to the fax JOB file (see faxq(5)).

.TP
.B failure-call-program <name>
Similar to the "success-call-program", this program will be run when the
fax has been failed too often and 
.I faxrunq
gives up. This script could, for example, print out the fax on a printer
so that it can be sent manually on a paper fax machine.

.TP
.B maxfail-costly <n>
This specifies the number of times that a fax may fail "fatally", that
is, causing telephone costs (explained above). The default value is 5.

.TP
.B maxfail-total <m>
This is the absolute maximum number of times that 
.I faxrunq
will try to send any given fax. The default value is 10. (Right now, 
it's not yet implemented).

.TP
.B delete-sent-jobs [y/n]
Determines whether
.I faxrunq
should delete jobs after sending, or leave them in the fax queue (while
moving the "JOB" file to "JOB.done") so that they can be seen at by
"faxq -o". The default value is "do not delete sent faxes".

There are some other options that are allowed, but ignored.  These are:
.I max-modems,
.I faxrunqd-log,
and
.I acct-log

They are used by faxrunqd(8) (which reads the same config file, but has
more options).

.IX fax
.SH BUGS
.I faxrunq
doesn't remove a successfully sent job (commented out in the source), just
de-queues it.

.I faxrunq
doesn't handle time scheduling and normal resolution yet
.SH "SEE ALSO"
faxspool(1), sendfax(8), faxq(1), faxqueue(5)
.SH AUTHOR
.I faxrunq
is Copyright (C) 1993 by Gert Doering, <gert@greenie.muc.de>.
